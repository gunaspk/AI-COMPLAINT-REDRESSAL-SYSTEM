def handle_image_message(from_number, image_data, message_id):
    """AI-powered image analysis"""
    image_id = image_data.get("id")
    caption = image_data.get("caption", "")
    
    # Send immediate acknowledgment
    send_reaction(from_number, message_id, "ğŸ“¸")
    
    # Simulate AI detection (replace with actual ML model)
    detected_issue = detect_issue_from_image(image_id)  # Your ML function
    
    if detected_issue == "pothole":
        response = """ğŸ•³ï¸ *Pothole Detected!*

*AI Analysis Results:*
âœ… Issue: Pothole (92% confidence)
ğŸ“ Size: Medium (Est. 30cm width)
âš ï¸ Severity: High risk
ğŸ“ Next: Share your location

*Complaint will auto-generate* once location received!"""
    
    elif detected_issue == "streetlight":
        response = """ğŸ’¡ *Streetlight Issue Detected!*

*AI Analysis Results:*
âœ… Issue: Non-functional streetlight
ğŸ”‹ Type: LED pole light
âš ï¸ Impact: Safety concern
ğŸ“ Next: Share exact location

*Routing to Electricity Department...*"""
    
    elif detected_issue == "garbage":
        response = """ğŸ—‘ï¸ *Garbage Issue Detected!*

*AI Analysis Results:*
âœ… Issue: Waste accumulation
ğŸ“Š Severity: Moderate
ğŸ  Type: Residential area waste
ğŸ“ Next: Confirm location

*Notifying Waste Management...*"""
    
    else:
        response = """ğŸ“¸ *Image Received*

*Processing with AI...*
â³ Analyzing issue type
ğŸ” Detecting severity level
ğŸ“ Please share your location

Your complaint will be categorized automatically!"""
    
    send_text_message(from_number, response)

def detect_issue_from_image(image_id):
    """Placeholder for ML model - replace with actual detection"""
    import random
    return random.choice(["pothole", "streetlight", "garbage", "unknown"])
